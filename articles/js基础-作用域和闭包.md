# js基础-作用域和闭包

## 作用域

概念：查找变量的规则。

编译原理
为什么要知道编译原理呢？编译原理是从源代码到可执行代码到机器可以识别的代码的一个过程。

不同的语言的编译原理不一样，可能同样一份代码，在java中和在javascript中的执行结果不同。根本的区别就在于两者对于程序的编译的过程不同。

传统的语言是提前编译的，但js不是提前编译的。编译结果也不能在分布式系统中进行移植。

传统编译语言，程序中的源代码在执行前会经历3个步骤，统称为“编译”。

- 分词/词法分析
- 解析/语法分析
- 代码生成

**引擎查找方式有2种： LHS和RHS**

变量赋值，LHS
非变量赋值：RHS

为什么区分LHS和RHS？

因为在变量还没有声明（在任何作用域中都无法找到该变量）的情况下，这两种查询的行为是不一样的。

LHS 和 RHS 查询都会在当前执行作用域中开始，如果有需要(也就是说它们没有找到所 需的标识符)，就会向上级作用域继续查找目标标识符，这样每次上升一级作用域(一层 楼)，最后抵达全局作用域(顶层)，无论找到或没找到都将停止。
不成功的 RHS 引用会导致抛出 ReferenceError 异常。不成功的 LHS 引用会导致自动隐式 地创建一个全局变量(非严格模式下)，该变量使用 LHS 引用的目标作为标识符，或者抛 出 ReferenceError 异常(严格模式下)。

**作用域查找规则**

引擎从当前的执行作用域开始查找变量，如果找不到，就向上一级查找。当抵达最外层的全局作用域时，无论找到还是没有找到，都会结束。

## 词法作用域
